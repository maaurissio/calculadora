<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JDM Performance - Calculadora</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Noto+Sans+JP:wght@400;700;900&family=M+PLUS+1p:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Japanese background text -->
    <div class="japanese-bg">
        <span>„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ</span>
        <span>„Çπ„Éî„Éº„Éâ</span>
        <span>„ÉÅ„É•„Éº„Éã„É≥„Ç∞</span>
        <span>Êó•Êú¨</span>
        <span>ÈÄüÂ∫¶</span>
        <span>ÊîπÈÄ†</span>
    </div>
    
    <div class="container">
        <!-- Toggle de tema fuera del header -->
        <div class="theme-toggle">
            <button class="theme-toggle-btn" onclick="toggleTheme()" title="Cambiar tema">
                <span class="icon" id="theme-icon">üåô</span>
                <span id="theme-text">Êöó„ÅÑ</span>
            </button>
        </div>

        <header>
            <div class="header-japanese">ÊÄßËÉΩ</div>
            <h1>JDM PERFORMANCE</h1>
            <p class="subtitle">„É°„Ç´„Éã„ÉÉ„ÇØÈõªÂçì ‚Ä¢ Calculadora Mec√°nico</p>
            <div class="rising-sun"></div>
        </header>

        <!-- ZONA DE APUNTES -->
        <section class="notes-section">
            <div class="notes-header">
                <h2>‰ΩúÊ•≠ TRABAJO</h2>
                <button class="btn-clear-notes" onclick="clearNotes()">‚úï LIMPIAR</button>
            </div>
            
            <div class="notes-content">
                <!-- √Årea de imagen -->
                <div class="image-area">
                    <div id="image-preview" class="image-preview" tabindex="0">
                        <p class="placeholder-text">üì∏ Win+Shift+S y pega (Ctrl+V)<br>O arrastra/click</p>
                        <img id="preview-img" style="display: none;" onclick="openImageModal()">
                    </div>
                    <input type="file" id="image-input" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                    <button class="btn-remove-image" id="btn-remove-img" style="display: none;" onclick="removeImage()">‚úï QUITAR</button>
                </div>

                <!-- TUNEO al lado de imagen -->
                <div class="tuneo-inline">
                    <h3>„ÉÅ„É•„Éº„Éã„É≥„Ç∞ TUNEO</h3>
                    <div class="service-item">
                        <label>N√∫mero de piezas:</label>
                        <div class="input-group">
                            <button class="btn-minus" onclick="decrementValue('tuneo')">-</button>
                            <input type="number" id="tuneo" min="0" value="0" onchange="calculateTotal()">
                            <button class="btn-plus" onclick="incrementValue('tuneo')">+</button>
                        </div>
                        <span class="price">$1.600 c/u</span>
                    </div>
                </div>
            </div>
        </section>
        <textarea id="work-notes" style="display:none;"></textarea>

        <div class="calculator">
            <!-- RENDIMIENTO -->
            <section class="service-card" data-kanji="ÊÄßËÉΩ">
                <h2>ÊÄßËÉΩ RENDIMIENTO</h2>
                <div class="service-options">
                    <label class="radio-option">
                        <input type="radio" name="rendimiento" value="0" checked onchange="toggleCustomRendimiento()">
                        <span>Ninguno</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="rendimiento" value="6000" onchange="toggleCustomRendimiento()">
                        <span>Full Rendimiento <strong>$6.000</strong></span>
                    </label>
                    <label class="radio-option custom-pieces">
                        <input type="radio" name="rendimiento" value="custom" onchange="toggleCustomRendimiento()">
                        <span>Piezas individuales</span>
                    </label>
                </div>
                <div id="rendimiento-custom" class="custom-input hidden">
                    <label>N√∫mero de piezas:</label>
                    <div class="input-group">
                        <button class="btn-minus" onclick="decrementValue('rendimiento-piezas')">-</button>
                        <input type="number" id="rendimiento-piezas" min="0" value="0" onchange="calculateTotal()">
                        <button class="btn-plus" onclick="incrementValue('rendimiento-piezas')">+</button>
                    </div>
                    <span class="price">$1.000 c/u</span>
                </div>
            </section>

            <!-- MOTOS -->
            <section class="service-card" data-kanji="Ëªä">
                <h2>„Éê„Ç§„ÇØ MOTOS</h2>
                <div class="service-options">
                    <label class="radio-option">
                        <input type="radio" name="motos" value="0" checked onchange="calculateTotal()">
                        <span>No aplica</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="motos" value="4000" onchange="calculateTotal()">
                        <span>Full Rendimiento <strong>$4.000</strong></span>
                    </label>
                </div>
            </section>

            <!-- TRANSMISI√ìN -->
            <section class="service-card" data-kanji="Â§â">
                <h2>Â§âÈÄüÊ©ü TRANSMISI√ìN</h2>
                <div class="service-options">
                    <label class="radio-option">
                        <input type="radio" name="transmision" value="0" checked onchange="calculateTotal()">
                        <span>Ninguna</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="transmision" value="120000" onchange="calculateTotal()">
                        <span>Delantera <strong>$120.000</strong></span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="transmision" value="180000" onchange="calculateTotal()">
                        <span>Trasera <strong>$180.000</strong></span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="transmision" value="230000" onchange="calculateTotal()">
                        <span>Integral <strong>$230.000</strong></span>
                    </label>
                </div>
            </section>

            <!-- REPARACI√ìN -->
            <section class="service-card" data-kanji="‰øÆ">
                <h2>‰øÆÁêÜ REPARACI√ìN</h2>
                <div class="service-options">
                    <label class="checkbox-option-service">
                        <input type="checkbox" id="reparacion-checkbox" onchange="calculateTotal()">
                        <span>Reparaci√≥n <strong>$6.000</strong></span>
                    </label>
                </div>
                
                <div class="service-separator"></div>
                
                <div class="service-options">
                    <label class="checkbox-option-service">
                        <input type="checkbox" id="kit-checkbox" onchange="toggleKitReparacion()">
                        <span>Venta de Kit Reparaci√≥n</span>
                    </label>
                </div>
                <div id="kit-reparacion" class="custom-input hidden">
                    <label>N√∫mero de kits (m√°x 5):</label>
                    <div class="input-group">
                        <button class="btn-minus" onclick="decrementValue('kit-personas')">-</button>
                        <input type="number" id="kit-personas" min="0" max="5" value="0" onchange="calculateTotal()">
                        <button class="btn-plus" onclick="incrementValue('kit-personas')">+</button>
                    </div>
                    <span class="price">$8.000 c/u (hasta 5 kits)</span>
                </div>
            </section>

            <!-- NEUM√ÅTICO -->
            <section class="service-card" data-kanji="Ëº™">
                <h2>„Çø„Ç§„É§ NEUM√ÅTICO</h2>
                <div class="service-options">
                    <label class="radio-option">
                        <input type="radio" name="neumatico" value="0" checked onchange="calculateTotal()">
                        <span>Ninguno</span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="neumatico" value="10000" onchange="calculateTotal()">
                        <span>Off-Road <strong>$10.000</strong></span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="neumatico" value="5000" onchange="calculateTotal()">
                        <span>Semi Slicks <strong>$5.000</strong></span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="neumatico" value="10000-slick" onchange="calculateTotal()">
                        <span>Slick <strong>$10.000</strong></span>
                    </label>
                </div>
            </section>

            <!-- MANTENCI√ìN -->
            <section class="service-card" data-kanji="Êï¥">
                <h2>Êï¥ÂÇô MANTENCI√ìN</h2>
                <div class="service-options">
                    <label class="radio-option">
                        <input type="radio" name="mantencion" value="0" checked onchange="toggleMantencionPorParte()">
                        <span>Ninguna</span>
                    </label>
                    <label class="radio-option custom-pieces">
                        <input type="radio" name="mantencion" value="por-parte" onchange="toggleMantencionPorParte()">
                        <span>Por Parte <strong>$1.500 c/u</strong></span>
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="mantencion" value="8000" onchange="toggleMantencionPorParte()">
                        <span>Completa <strong>$8.000</strong></span>
                    </label>
                </div>
                <div id="mantencion-custom" class="custom-input hidden">
                    <label>N√∫mero de piezas:</label>
                    <div class="input-group">
                        <button class="btn-minus" onclick="decrementValue('mantencion-piezas')">-</button>
                        <input type="number" id="mantencion-piezas" min="0" value="0" onchange="calculateTotal()">
                        <button class="btn-plus" onclick="incrementValue('mantencion-piezas')">+</button>
                    </div>
                    <span class="price">$1.500 c/u</span>
                </div>
            </section>
        </div>

        <!-- CUP√ìN DE DESCUENTO -->
        <section class="coupon-section" data-kanji="Ââ≤">
            <h2>Ââ≤Âºï DESCUENTO</h2>
            <div class="coupon-content">
                <label class="checkbox-option">
                    <input type="checkbox" id="coupon-checkbox" onchange="toggleCoupon()">
                    <span>Cliente us√≥ cup√≥n de descuento</span>
                </label>
                <div id="coupon-input-area" class="coupon-input-area hidden">
                    <label>Porcentaje de descuento:</label>
                    <div class="input-group">
                        <button class="btn-minus" onclick="decrementCoupon()">-</button>
                        <input type="number" id="coupon-percentage" min="0" max="100" value="0" onchange="calculateTotal()">
                        <button class="btn-plus" onclick="incrementCoupon()">+</button>
                        <span class="percentage-sign">%</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- TOTAL -->
        <div class="total-section">
            <div class="total-content">
                <div class="total-japanese">ÂêàË®à</div>
                <h2>TOTAL</h2>
                <div class="total-amount" id="total">$0</div>
                <div class="reset-buttons">
                    <button class="btn-reset" onclick="resetCalculator()">RESET</button>
                    <button class="btn-reset-all" onclick="resetAll()">BORRAR TODO</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para imagen ampliada -->
    <div id="image-modal" class="image-modal" onclick="closeImageModal()">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="modal-img">
        <div class="modal-caption">Click en cualquier parte para cerrar</div>
    </div>

    <script src="script.js"></script>
</body>
</html>
